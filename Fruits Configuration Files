




const mongoose = require('mongoose');
// Replace the uri string with your connection string.
const client = mongoose.connect("mongodb://127.0.0.1:27017/fruitsDB", {useNewUrlParser:true});

const express = require('express');

const app = express();


const fruitSchema = new mongoose.Schema({
  name:String, 
  rating: {
               type: Number, 
               min: 1, 
               max: 10
         }, 
  review: String 
});

const Fruit = mongoose.model("Fruit", fruitSchema);

const personSchema = new mongoose.Schema({
  name: String,
  age: Number,
  favoriteFruit: fruitSchema

});
  

////////////////////////////////////
const Person = mongoose.model("Person", personSchema);

Person.createCollection().then(function (Person) {
        console.log("Collection is created !");
});

async function run() {
await mongoose.connect('mongodb://localhost:27017');
await Person.create({
    name: 'Anna', 
    age: 27, 
    favoriteFruit: "peaches"
});
}
run();


const peach = new Fruit({
  name: "peach" ,
  rating: 10, 
  review: "Peaches are so yummy!  solid as a fruit"
});



const apple = new Fruit ({
  name: "Apple", 
  rating: 10, 
  review: "Pretty solid as a fruit."
});





const pineapple = new Fruit({
  name: "pineapple", 
  score: 8, 
  review: "Great fruit"
});
pineapple.save();



const John = new Person({
  name: "John", 
  age: 37, 
  favoriteFruit: apple
});
John.save();


const Anna = new Person({
  name: "Anna", 
  age: 38, 
  favoriteFruit: peach

});
Anna.save();


const Amy = new Person({
  name: "Amy", 
  age: 12, 
  favoriteFruit: pineapple
  
});
Amy.save();

  /*Amy.save(); */


const kiwi = new Fruit({
  name : "kiwi", 
  score: 10, 
  review: "the best fruit"
});

kiwi.save();

const orange = new Fruit({
  name : "orange", 
  score: 4, 
  review: "Too sour for me"
});

orange.save();

const banana = new Fruit({
  name : "banana", 
  score: 3, 
  review: "Weird texture"
});

banana.save();

const raspberries = new Fruit({
  name: "raspberries", 
  score: 8, 
  review: "very delicious and enjoyable right off the vine"

});

raspberries.save();

const watermellon = new Fruit({
  name: "watermellon", 
  score: 10, 
  review: "very refreshing on a hot day"
});
watermellon.save();


const tomatoes = new Fruit({
  name: "tomatoes", 
  score: 10, 
  review: "very refreshing on a hot day and good for the heart "
});

tomatoes.save();

/* Fruit.insertMany([kiwi, orange, banana, raspberries, watermellon, tomatoes] ) ;
  
    console.log("successfully saved to fruitsDB"); */


    /* Person.insertMany([Amy]); */



 Fruit.find()
 .then((fruits) => {
  fruits.forEach((fruits) => {
    console.log(fruits.id, ":" , fruits.name, fruits.score, fruits.review);
  });
 });

  
Person.find()
.then((persons) => {
  persons.forEach((persons) => {
    console.log(persons.name, ":", persons.age, ":", persons.favoriteFruit);
  });
  mongoose.connection.close();
  
});

   



